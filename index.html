
<html>
<head>
<title>Peta</title>
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.8.0/dist/leaflet.css" integrity="sha512-hoalWLoI8r4UszCkZ5kL8vayOGVae1oxXe/2A4AO6J9+580uKHDO3JdHb7NzwwzK5xr/Fs0W40kiNHxM9vyTtQ==" crossorigin=""/>
<!-- Make sure you put this AFTER Leaflet's CSS -->
<script src="https://unpkg.com/leaflet@1.8.0/dist/leaflet.js" integrity="sha512-BB3hKbKWOc9Ez/TAwyWxNXeoV9c1v6FIeYiBieIWkpLjauysF18NzgR1MBNBXf8/KABdlkX68nAhlwcDFLGPCQ==" crossorigin=""></script>
<style>
    html, body {
    height: 100%;
    margin: 0;
    }
    .leaflet-container {
    height: 400px;
    width: 600px;
    max-width: 100%;
    max-height: 100%;
    }
    p{
        font-size: x-large;
    }

    @media only screen and (max-width: 600px) {
    p {
        font-size: x-large;
    }
}
</style>
</head>
<body style="background-color: #1d2089;">
    <h1 style="text-align: center; color: white;">Data Titik Lokasi Terdampak Banjir Garut 2022</h1>

    <div id="map" style="width: 100vw; height: 100vh; position: relative;" class="leaflet-container leaflet-touch leaflet-fade-anim leaflet-grab leaflet-touch-drag leaflet-touch-zoom" tabindex="0"><div class="leaflet-pane leaflet-map-pane" style="transform: translate3d(0px, 0px, 0px);"><div class="leaflet-pane leaflet-tile-pane"><div class="leaflet-layer " style="z-index: 1; opacity: 1;"><div class="leaflet-tile-container leaflet-zoom-animated" style="z-index: 19; transform: translate3d(0px, 0px, 0px) scale(1);"><img alt="" role="presentation" src="https://a.tile.openstreetmap.org/13/4093/2723.png" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; transform: translate3d(56px, -91px, 0px); opacity: 1;"><img alt="" role="presentation" src="https://b.tile.openstreetmap.org/13/4094/2723.png" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; transform: translate3d(312px, -91px, 0px); opacity: 1;"><img alt="" role="presentation" src="https://b.tile.openstreetmap.org/13/4093/2724.png" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; transform: translate3d(56px, 165px, 0px); opacity: 1;"><img alt="" role="presentation" src="https://c.tile.openstreetmap.org/13/4094/2724.png" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; transform: translate3d(312px, 165px, 0px); opacity: 1;"><img alt="" role="presentation" src="https://c.tile.openstreetmap.org/13/4092/2723.png" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; transform: translate3d(-200px, -91px, 0px); opacity: 1;"><img alt="" role="presentation" src="https://c.tile.openstreetmap.org/13/4095/2723.png" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; transform: translate3d(568px, -91px, 0px); opacity: 1;"><img alt="" role="presentation" src="https://a.tile.openstreetmap.org/13/4092/2724.png" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; transform: translate3d(-200px, 165px, 0px); opacity: 1;"><img alt="" role="presentation" src="https://a.tile.openstreetmap.org/13/4095/2724.png" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; transform: translate3d(568px, 165px, 0px); opacity: 1;"></div></div></div><div class="leaflet-pane leaflet-overlay-pane"><svg pointer-events="none" class="leaflet-zoom-animated" width="720" height="480" viewBox="-60 -40 720 480" style="transform: translate3d(-60px, -40px, 0px);"><g><path class="leaflet-interactive" stroke="red" stroke-opacity="1" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" fill="#f03" fill-opacity="0.5" fill-rule="evenodd" d="M141.20355555554852,171.94704600190744a42,42 0 1,0 84,0 a42,42 0 1,0 -84,0 "></path><path class="leaflet-interactive" stroke="#3388ff" stroke-opacity="1" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" fill="#3388ff" fill-opacity="0.2" fill-rule="evenodd" d="M358 163L474 219L550 153z"></path></g></svg></div><div class="leaflet-pane leaflet-shadow-pane"><img src="https://unpkg.com/leaflet@1.8.0/dist/images/marker-shadow.png" class="leaflet-marker-shadow leaflet-zoom-animated" alt="" style="margin-left: -12px; margin-top: -41px; width: 41px; height: 41px; transform: translate3d(300px, 247px, 0px);"></div><div class="leaflet-pane leaflet-marker-pane"><img src="https://unpkg.com/leaflet@1.8.0/dist/images/marker-icon.png" class="leaflet-marker-icon leaflet-zoom-animated leaflet-interactive" alt="Marker" tabindex="0" role="button" style="margin-left: -12px; margin-top: -41px; width: 25px; height: 41px; transform: translate3d(300px, 247px, 0px); z-index: 247;"></div><div class="leaflet-pane leaflet-tooltip-pane"></div><div class="leaflet-pane leaflet-popup-pane"><div class="leaflet-popup leaflet-zoom-animated" style="opacity: 1; transform: translate3d(300px, 125px, 0px); bottom: -7px; left: -97px;"><div class="leaflet-popup-content-wrapper"><div class="leaflet-popup-content" style="width: 148px;">I am a standalone popup.</div></div><div class="leaflet-popup-tip-container"><div class="leaflet-popup-tip"></div></div><a class="leaflet-popup-close-button" role="button" aria-label="Close popup" href="#close"><span aria-hidden="true">×</span></a></div></div><div class="leaflet-proxy leaflet-zoom-animated" style="transform: translate3d(1.04805e+06px, 697379px, 0px) scale(4096);"></div></div><div class="leaflet-control-container"><div class="leaflet-top leaflet-left"><div class="leaflet-control-zoom leaflet-bar leaflet-control"><a class="leaflet-control-zoom-in" href="#" title="Zoom in" role="button" aria-label="Zoom in" aria-disabled="false"><span aria-hidden="true">+</span></a><a class="leaflet-control-zoom-out" href="#" title="Zoom out" role="button" aria-label="Zoom out" aria-disabled="false"><span aria-hidden="true">−</span></a></div></div><div class="leaflet-top leaflet-right"></div><div class="leaflet-bottom leaflet-left"></div><div class="leaflet-bottom leaflet-right"><div class="leaflet-control-attribution leaflet-control"><a href="https://leafletjs.com" title="A JavaScript library for interactive maps"><svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8"><path fill="#4C7BE1" d="M0 0h12v4H0z"></path><path fill="#FFD500" d="M0 4h12v3H0z"></path><path fill="#E0BC00" d="M0 7h12v1H0z"></path></svg> Leaflet</a> <span aria-hidden="true">|</span> © <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a></div></div></div></div>
    <script>


    var map = L.map('map').setView([-7.2162751,107.8990084], 13);


    var tiles = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    maxZoom: 19,
    attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
    }).addTo(map);

    map.on('click', onMapClick);  
    let url = 'https://my-json-server.typicode.com/raflimr/demojson/dataKoordinat';

    fetch(url)
    .then((out) => {
      console.log('Checkout this JSON! ', out);
      
      const jsonToString = JSON.stringify(out);
      console.log('jsonToString', jsonToString);
    })
    .catch(err => { throw err });

    var namaTempat 
    var namaTempatReplace
    var koordinat = [
    {
        "idLokasi": "1",
        "lat":-7.3477651,
        "long":107.7947223,
        "namaTempat":" Desa Cibodas",
        "keterangan":"22 unit rumah terendam,41 kk / 98 jiwa "

    },
    {
        "idLokasi": "2",
        "lat":-7.2254047,
        "long":107.9047094,
        "namaTempat":"Desa Kota Kulon",
        "keterangan":"40 unit rumah terendam, 7 unit rumah rusak berat  ",
    },
    {
        "idLokasi": "3",
        "lat":-7.2254046,
        "long":107.8981433,
        "namaTempat":"Desa Muara Sanding",
        "keterangan":"2 unit rumah terdampak, 2 unit rumah rusak berat, 2 unit rumah terendam,15 kk / 71 jiwa "
    },
    {
        "idLokasi": "4",
        "lat":-7.2254032,
        "long":107.8718782,
        "namaTempat":"Desa Sukakarya",
        "keterangan":" 103 unit rumah terendam,"
    },
    {
        "idLokasi": "5",
        "lat":-7.2041763,
        "long":107.9024956,
        "namaTempat":"Desa Haurpanggung",
        "keterangan":" 28 mengungsi, 1 perempuan ibu hamil selamat, 2 perempuan balita selamat"

    },
    {
        "idLokasi": "6",
        "lat":-7.2435283,
        "long":107.78143,
        "namaTempat":"Desa Sukajaya",
        "keterangan":" 10 unit rumah terendam"
        
    },
    {
        "idLokasi": "7",
        "lat":-7.2095404,
        "long":107.8886755,
        "namaTempat":"Desa Jayawaras",
        "keterangan":" Terdampak : 71 KK / 254 Jiwa"
    
    },
    {
        "idLokasi": "8",
        "lat":-7.2162234,
        "long":107.9217015,
        "namaTempat":"Desa Suci",
        "keterangan":" 74 Unit Rumah Terendam "
    
    },
    {
        "idLokasi": "9",
        "lat":-7.2141249,
        "long":107.9210916,
        "namaTempat":"Desa Suci Kaler",
        "keterangan":"30 Unit Rumah Terendam "
    
    },
    {
        "idLokasi": "10",
        "lat":-7.1996301,
        "long":107.9416703,
        "namaTempat":"Desa Sindanglaya",
        "keterangan":"1 Unit Fasilitas Umum Terdampak "
    
    },
    {
        "idLokasi": "11",
        "lat":-7.2692369,
        "long":107.8451763,
        "namaTempat":"Desa Panembong",
        "keterangan":"1 Unit Fasilitas Umum Terdampak "
    
    },
    {
        "idLokasi": "12",
        "lat":-7.2682976,
        "long":107.8130276,
        "namaTempat":"Desa Mulyasari",
        "keterangan":"2 KK terdampak "
    
    },
    {
        "idLokasi": "13",
        "lat":-7.1966762,
        "long":107.9891432,
        "namaTempat":"Desa Sukaratu",
        "keterangan":"1 Unit Fasilitas Umum Terdampak"
    
    },
    {
        "idLokasi": "14",
        "lat":-7.2537242,
        "long":107.9003538,
        "namaTempat":"Desa Ngamplang",
        "keterangan":"1 Unit Fasilitas Umum Terdampak"
    
    },
    {
        "idLokasi": "15",
        "lat":-7.1973602,
        "long":107.9317877,
        "namaTempat":"Desa Mekarsari",
        "keterangan":"11 Unit Rumah Terendam, 1 Unit Sarana Pendidikan Terendam"
    
    }
]
    koordinat.forEach(function(item){
        namaTempat = item.namaTempat
        namaTempatReplace = namaTempat.replace(/\s/g, '+')
        console.log(namaTempatReplace)
        L.marker([item.lat, item.long]).addTo(map)
        .bindPopup(`<p><b>${item.namaTempat}</b><br><a href=https://www.google.com/maps/dir//${namaTempatReplace}/@${item.lat},${item.long}>Lokasi</a><br>${item.keterangan}</p>`).openPopup();
    })


    // L.marker([-7.218248255832053, 107.90181558304212]).addTo(map)
    // .bindPopup('<b>Titik II</b><br />SDN Regol 10.<br><a href=https://www.google.com/maps/dir//SDN+Regol+10/@-7.218248255832053,107.90181558304212,18.04z>Lokasi</a>').openPopup();


    function onMapClick(e) {
    popup
    .setLatLng(e.latlng)
    .setContent('You clicked the map at ' + e.latlng.toString())
    .openOn(map);
    }
</script>
</body>
</html>

